# Degis-Core

**This repo is still during the migration from truffle to hardhat&ts.**

- Audit Snapshot time: Jan 7 10:23

Core smart contracts for Degis including:

- Degis Token & Buyer Token
- Flight Delay Product
- Naughty Price Product
- Lucky Box
- Farming & Purchase Incentive Pool
- Degis Staking

## Dependencies

```
hardhat ^2.7.1
solidity ^0.8.10
typescript ^4.5.3
```

## Getting Started

1. Install node packages

   with npm:

   ```
   npm install
   ```

   with yarn:

   ```
   yarn
   ```

2. Compile smart contracts

   ```
   npx hardhat compile
   ```

   or:

   ```
   yarn compile
   ```

3. Running tests with hardhat network

   ```
   npx hardhat test
   ```

   or:

   ```
   yarn test
   ```

4. Deploy to the blockchain

   ```
   npx hardhar run scripts/deploy/deploy.ts --network {{network name}}
   ```

   or:

   ```
   yarn deploy --network {{network name}}
   ```

## Docs

- In folder "/docs/solidity-docgen", documents are generate by **solidity-docgen** (from @openzeppelin) in the form of markdown.

  ```
  yarn docgen
  ```

- In folder "/docs/hardhat-docgen", documents are generated by **hardhat-docgen** in the form of html.

  ```
  yarn hardhat-docgen
  ```

## Coverage

Run coverage for test:

```
yarn coverage
```

- Notes: We are currently using a forked version of solidity-coverage that includes optimizer settings. Ideally we will move to the maintained version after this is fixed on their end.

## Verify

Verify the contracts with "hardhat-etherscan" plugin:

```
npx hardhat verify --network {network} DEPLOYED_CONTRACT_ADDRESS "Constructor Argument"
```

For complex constructor arguments, use scripts:

```
npx hardhat verify --constructor-args scripts/verify/arguments.js DEPLOYED_CONTRACT_ADDRESS
```

## Get the abis and addresses

- Every time you deploy the contracts, the abis will be put inside **deployments** folder.

- You also need to run the **getAddressList.js** to generate a separate json file containing the addresslist.


